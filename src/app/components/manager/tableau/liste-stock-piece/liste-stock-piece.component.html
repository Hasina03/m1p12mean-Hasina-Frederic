<div class="max-w-[1200px] mx-auto">
  <div class="relative flex flex-col w-full h-full text-slate-700 bg-white shadow-lg rounded-xl bg-clip-border min-h-[400px]">

    <!-- Header -->
    <div class="flex items-center justify-between px-6 py-4 bg-gradient-to-r from-gray-700 to-gray-900 rounded-t-xl">
      <h2 class="text-lg font-semibold text-white">Liste des pièces</h2>
      <input
        type="text"
        [(ngModel)]="searchTerm"
        (ngModelChange)="onSearchTermChange()"
        placeholder="Rechercher par nom ou véhicule..."
        class="w-1/3 px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
      />
    </div>

    <!-- Table -->
    <div class="p-0 overflow-auto h-[500px]">
      <table class="w-full mt-4 text-left table-auto min-w-max">
        <thead>
          <tr class="bg-gray-100 border-b border-gray-300">
            <th class="p-4 text-base font-semibold text-gray-700 text-center">Nom de la pièce</th>
            <th class="p-4 text-base font-semibold text-gray-700 text-center">Véhicule(s) compatible(s)</th>
            <th class="p-4 text-base font-semibold text-gray-700 text-center">Prix</th>
            <th class="p-4 text-base font-semibold text-gray-700 text-center">Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let piece of filteredPieces | paginate: { itemsPerPage: itemsPerPage, currentPage: page }" class="border-b border-gray-200 hover:bg-gray-50">

            <!-- Nom de la pièce -->
            <td class="p-4 text-base text-gray-800 text-center">{{ piece.nom }}</td>

            <!-- Véhicule(s) compatible(s) -->
            <td class="p-4 text-base text-gray-800 text-center">{{ getVehiculeCompatibles(piece) }}</td>

            <!-- Prix -->
            <td class="p-4 text-base text-gray-800 text-center">{{ getPrix(piece) }}</td>

            <!-- Actions -->
            <td class="p-4 text-base text-gray-800 text-center flex justify-center space-x-2">
              <button class="btn-danger" (click)="deletePiece(piece._id)">Supprimer</button>
            </td>

          </tr>
        </tbody>
      </table>
    </div>

    <!-- Pagination -->
    <div class="flex items-center justify-between px-6 py-3 bg-gray-50 rounded-b-xl">
      <p class="text-gray-500 text-sm">Page {{ page }} de {{ (filteredPieces.length / itemsPerPage) | number: '1.0-0' }}</p>
      <pagination-controls (pageChange)="page = $event" previousLabel="Précédent" nextLabel="Suivant"></pagination-controls>
    </div>

  </div>
</div>
